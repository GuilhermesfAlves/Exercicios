Subrotinas (SUBROUTINE) e funções (FUNCTION), são subprogramas que são chamados (ou invocados) através do programa principal e que geralmente têm um conjunto de argumentos, os quais podem ser de entrada, de saída e de entrada e saída.

Nas declarações:
argumentos de entrada: INTENT(IN)!não podem ter seus valores alterados

argumentos de saída: INTENT(OUT)!só podem ser usados depois que um valor 					!lhe for atribuído 

argumentos de entrada e saída: INTENT(INOUT)!podem ser usados e podem ter 					    !seus valores alterados


FUNÇÕES

Sintaxe
tipo FUNCTION nomeFuncao (arg1,..., argn)
IMPLICIT NONE
[Especificação]
[execução]
[subprogramas]
END FUNCTION nomeFuncao

Exemplo
INTEGER FUNCTION Soma(a, b, c)
IMPLICIT NONE
INTEGER, INTENT(IN) :: a, b, c
Soma = a + b + c
END FUNCTION Soma

Explicação
INTEGER, INTENT(IN) :: a, b, c 
Esta linha especifica os dados formais dos parâmetros a,b,c, são inteiros, e não podem ter seus valores alterados.

A função anterior usa três números inteiros como argumento e retorna a soma destes elementos. Para fazer o uso (invocar) da função basta usar
o nome da função passsando os argumentos pedidos. Ex Soma(1.0,2.0,3.0).

Os parâmetros podem ser constantes, variáveis e expressões.
Caso algum parâmetro não seja declarado como intent(in) o valor deste parâmetro pode ser modificado. O evento de mudança do valor de um parâmetro em uma função, chamado de “efeito colateral”, não é uma boa prática de programação, devendo ser evitado sempre que possível.

Exercícios

Faça uma função que receba um número como parâmetro e retorne um valor lógico indicando se este número é positivo ou não.

Faça uma função que calcule o fatorial de um número.

Sabe-se que 1 cm corresponde à 0.3937 polegadas e 1 polegada é igual à 2.54 cm. Escreva um programa que escreva na tela os valores correspondentes a 0.0, 0.5,1.0, ..., 10.0 cm em polegadas.

Faça um programa que contenha uma função capaz de encontrar o máximo divisor comum entre dois números.



SUBROTINAS

Em casos que se deseja retornar mais de um parâmetro ou nenhum parâmetro de retorno para o programa principal, subrotinas são mais indicadas ao invés de funções.

Sintaxe
SUBROUTINE nome (arg1, arg2, ..., argn)
IMPLICIT NONE
[especificação]
[execução]
[subprogramas]
END SUBROUTINE nome

Exemplo
SUBROUTINE Medias(a, b, c, Am, Gm, Hm)
IMPLICIT NONE
REAL, INTENT(IN) :: a, b, c
REAL, INTENT(OUT) :: Am, Gm, Hm
!calculo das médias aritimética, geométrica
! e harmônica
END SUBROUTINE medias

Invocando subrotinas através do programa principal:
   CALL nome(<parâmetros>)

Exercícios
Sabendo que a média aritmética de três números a, b, c é dada por (a+b+c)/3, a média geométrica é dada por (a+b+c)^1/3 e a média harmônica é dada por 3/(1/a+1/b+1/c), complete a subrotina dada como exemplo.

Faça uma subrotina para preencher os elementos de um vetor.

Faça uma subrotina que leia, um a um, os elementos de uma matriz.

Faça uma subrotina que, dada uma matriz de duas dimensões, procure por um elemento, informado pelo usuário e determine as coordenadas (linha e coluna) da primeira ocorrência deste elemento.